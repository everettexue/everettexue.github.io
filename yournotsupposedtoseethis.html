<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Parallax + GSAP Video Scroll</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollSmoother.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/yaml@2.8.0/browser/index.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/uuid@11.1.0/dist/cjs-browser/index.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/supports-color@10.0.0/index.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/minimatch@10.0.1/dist/commonjs/index.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chalk@5.4.1/source/index.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ansi-styles@6.2.1/index.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/semver@7.7.2/index.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ms@2.1.3/index.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/debug@4.4.1/src/browser.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tslib@2.8.1/tslib.min.js"></script>
  <script src="https://unpkg.com/gsap@3/dist/Physics2DPlugin.min.js"></script>
  <script src="https://unpkg.com/gsap@3/dist/PhysicsPropsPlugin.min.js"></script>
  <script src="https://unpkg.com/gsap@3/dist/ScrambleTextPlugin.min.js"></script>
  <script src="https://unpkg.com/gsap@3/dist/SplitText.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sql.js@0.5.0/js/sql.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/knockout@3.5.1/build/output/knockout-latest.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ejs@3.1.8/ejs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.7.8/dist/vue.min.js"></script>

  <style>
    * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.video {
  position: fixed;
  width: 100vw;
  height: 100vh;
  object-fit: cover;
}



  </style>
</head>

<body>
<!-- code from Rachelle Wise on Codepen https://codepen.io/wisearts/pen/ExZGrbZ -->

<div id="smooth-wrapper">
  <div id="smooth-content">

    <div class="parallax"></div>
    <div class="parallax1"></div>

    <!-- The video section -->
    <section class="video-section">
      <video class="video" playsinline webkit-playsinline preload="auto" muted>
        <source src="https://www.dropbox.com/scl/fi/v2g4lfx3kv63vojs7ut2f/output3.mp4?rlkey=0bo4q86youw201quxeklg6ys2&st=jxzb3lql&raw=1" type="video/mp4" />
      </video>
    </section>
  </div>
</div>


  <script>
/* Encoding is important!!!
//--------------------------------
// ffmpeg settings used:
//--------------------------------

ffmpeg -i input.mp4 -vf scale=960:-1 -movflags faststart -vcodec libx264 -crf 20 -g 1 -pix_fmt yuv420p output.mp4

// scale filtergraph optional
// ffmpeg docs: http://ffmpeg.org/ffmpeg.html

*/
gsap.registerPlugin(ScrollTrigger);

const coolVideo = document.querySelector("video");

let tl = gsap.timeline({
  scrollTrigger: {
    trigger: "video",
    start: "top top",
    end: "bottom+=1800% bottom",
    scrub: true,
    markers: true
  }
});

// wait until video metadata is loaded, so we can grab the proper duration before adding the onscroll animation. Might need to add a loader for loonng videos
coolVideo.onloadedmetadata = function () {
  tl.to(coolVideo, { currentTime: coolVideo.duration });
};

// Dealing with devices
function isTouchDevice() {
  return (
    "ontouchstart" in window ||
    navigator.maxTouchPoints > 0 ||
    navigator.msMaxTouchPoints > 0
  );
}
if (isTouchDevice()) {
  coolVideo.play();
  coolVideo.pause();
}

  </script>
</body>
</html>
